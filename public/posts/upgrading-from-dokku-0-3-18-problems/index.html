<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>Upgrading from dokku 03.18 problems</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="/css/normalize.css">
  <link rel="stylesheet" href="/css/skeleton.css">
  <link rel="stylesheet" href="/css/app.css">

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="/images/favicon.png">

</head>
<body>

<!-- Primary Page Layout
–––––––––––––––––––––––––––––––––––––––––––––––––– -->

<header class="main-header post-head no-cover">
 <nav class="main-nav">
   <a class="button" href="/">Home</a>
 </nav>


</header>
<div class="container post">
  <div class="row">
    <div class="twelve columns" >
      <h2 class="post-title">Upgrading from dokku 03.18 problems</h2>
      <p>I forgot to give some proper love to my dokku installation (running in a Ubuntu Linode), which ment I was lagging behind some updates. Also, I find it sane to wait a couple updates in case a new one introduces new critical bugs :). So, there I was, a nice Sunday morning trying to upgrade, when I was met with the following error:</p>
<pre><code>Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 dokku : Depends: lxc-docker-1.6.2 but it is not going to be installed
E: Unable to correct problems, you have held broken packages.
root@gerul:~# apt-get install -qq -y dokku
E: Unable to correct problems, you have held broken packages.
</code></pre><p>The key here is <code>lxc-docker-1.6.2</code> which is needed and blocking the upgrade, due to my current version being <code>lxc-docker-1.6.0</code>. So, instead of blindly following the <a href="http://progrium.viewdocs.io/dokku/upgrading">dokku docs</a> and running <code>apt-get install -qq -y dokku</code> or <code>apt-get install -qq -y buildstep</code> do the following:</p>
<pre><code>$ apt-get install lxc-docker-1.6.2
</code></pre><p>Oh and is recommended that you rebuild all your apps after each upgrade:</p>
<pre><code>$ dokku ps:rebuildall
</code></pre><p>Note: the rebuildall might take some time so is good to use the time to stretch or enjoy a refreshing beverage ;).</p>

    </div>
  </div>
</div>

<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
</body>
</html>
